{% extends 'base.html' %}

{% block content %}

<!-- Kategori Navigasi
<div class="kategori">
    <a href="?kategori=all" class="{% if selected_kategori == 'all' %}active{% endif %}">All</a>
    <a href="?kategori=Batik" class="{% if selected_kategori == 'Batik' %}active{% endif %}">Batik</a>
    <a href="?kategori=Kerajinan Kulit" class="{% if selected_kategori == 'Kerajinan Kulit' %}active{% endif %}">Kerajinan Kulit</a>
    <a href="?kategori=Perak Kotagede" class="{% if selected_kategori == 'Perak Kotagede' %}active{% endif %}">Perak Kotagede</a>

    
 -->
 <h2 class="text-3xl font-bold mb-6">Produk Kerajinan</h2>
 <div id="category-container" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3 px-2 md:px-4">

    <!-- Kategori Batik -->
    <div class="relative rounded-md overflow-hidden shadow-sm category-item">
        <img src="https://img.freepik.com/premium-vector/elegant-vector-javanese-ethnic-batik-pattern-template_1325579-615.jpg" 
             alt="Batik" class="w-full h-24 object-cover">
        <div class="absolute inset-0 flex justify-center items-center">
            <a href="?kategori=Batik" 
               class="bg-white text-black text-sm font-semibold px-3 py-1 rounded-full shadow-md category-label">
                Batik
            </a>
        </div>
    </div>

    <!-- Kategori Kerajinan Kulit -->
    <div class="relative rounded-md overflow-hidden shadow-sm category-item">
        <img src="https://t3.ftcdn.net/jpg/02/26/92/86/360_F_226928653_CI7vW3087roWG6Ob9thI83Htd255aQyc.jpg" 
             alt="Kerajinan Kulit" class="w-full h-24 object-cover">
        <div class="absolute inset-0 flex justify-center items-center">
            <a href="?kategori=Kerajinan Kulit" 
               class="bg-white text-black text-sm font-semibold px-3 py-1 rounded-full shadow-md category-label">
                Kerajinan Kulit
            </a>
        </div>
    </div>

    <!-- Kategori Perak Kotagede -->
    <div class="relative rounded-md overflow-hidden shadow-sm category-item">
        <img src="https://img.freepik.com/free-photo/silver-aesthetic-wallpaper-with-decorations_23-2149871747.jpg" 
             alt="Perak Kotagede" class="w-full h-24 object-cover">
        <div class="absolute inset-0 flex justify-center items-center">
            <a href="?kategori=Perak Kotagede" 
               class="bg-white text-black text-sm font-semibold px-3 py-1 rounded-full shadow-md category-label">
                Perak Kotagede
            </a>
        </div>
    </div>

    <!-- Kategori Kerajinan Wayang -->
    <div class="relative rounded-md overflow-hidden shadow-sm category-item">
        <img src="https://img.freepik.com/free-vector/wayang-kulit-abstract-person-clouds_52683-46747.jpg" 
             alt="Kerajinan Wayang" class="w-full h-24 object-cover">
        <div class="absolute inset-0 flex justify-center items-center">
            <a href="?kategori=Kerajinan Wayang" 
               class="bg-white text-black text-sm font-semibold px-3 py-1 rounded-full shadow-md category-label">
                Kerajinan Wayang
            </a>
        </div>
    </div>

    <!-- Kategori Kerajinan Kayu -->
    <div class="relative rounded-md overflow-hidden shadow-sm category-item">
        <img src="https://img.freepik.com/premium-photo/wooden-craft-floral-pattern-background-generative-aixa_174954-1884.jpg" 
             alt="Kerajinan Kayu" class="w-full h-24 object-cover">
        <div class="absolute inset-0 flex justify-center items-center">
            <a href="?kategori=Kerajinan Kayu" 
               class="bg-white text-black text-sm font-semibold px-3 py-1 rounded-full shadow-md category-label">
                Kerajinan Kayu
            </a>
        </div>
    </div>

    <!-- Kategori Kerajinan Anyaman -->
    <div class="relative rounded-md overflow-hidden shadow-sm category-item">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSNBX7I8TQW7SHCcSoIDXQispwmhe36wFHm4w&s" 
             alt="Kerajinan Anyaman" class="w-full h-24 object-cover">
        <div class="absolute inset-0 flex justify-center items-center">
            <a href="?kategori=Kerajinan Anyaman" 
               class="bg-white text-black text-sm font-semibold px-3 py-1 rounded-full shadow-md category-label">
                Kerajinan Anyaman
            </a>
        </div>
    </div>

    <!-- Kategori Kerajinan Gerabah -->
    <div class="relative rounded-md overflow-hidden shadow-sm category-item">
        <img src="https://cdn.shopify.com/s/files/1/0836/2769/files/hands-clay-pottery_600x600.jpg?v=1671439611" 
             alt="Kerajinan Gerabah" class="w-full h-24 object-cover">
        <div class="absolute inset-0 flex justify-center items-center">
            <a href="?kategori=Kerajinan Gerabah" 
               class="bg-white text-black text-sm font-semibold px-3 py-1 rounded-full shadow-md category-label">
                Kerajinan Gerabah
            </a>
        </div>
    </div>

    <!-- Kategori Kerajinan Bambu -->
    <div class="relative rounded-md overflow-hidden shadow-sm category-item">
        <img src="https://d12oja0ew7x0i8.cloudfront.net/images/news/ImageForNews_59774_16606539847736385.jpg" 
             alt="Kerajinan Bambu" class="w-full h-24 object-cover">
        <div class="absolute inset-0 flex justify-center items-center">
            <a href="?kategori=Kerajinan Bambu" 
               class="bg-white text-black text-sm font-semibold px-3 py-1 rounded-full shadow-md category-label">
                Kerajinan Bambu
            </a>
        </div>
    </div>

    <!-- Kategori Kain Tenun Lurik -->
    <div class="relative rounded-md overflow-hidden shadow-sm category-item">
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTDcwgUoIOogHLV9-USwv2jhHe_qgthcjvxAQ&s" 
             alt="Kain Tenun Lurik" class="w-full h-24 object-cover">
        <div class="absolute inset-0 flex justify-center items-center">
            <a href="?kategori=Kain Tenun Lurik" 
               class="bg-white text-black text-sm font-semibold px-3 py-1 rounded-full shadow-md category-label">
                Kain Tenun Lurik
            </a>
        </div>
    </div>

    <!-- Kategori All -->
    <div class="relative rounded-md overflow-hidden shadow-sm category-item">
        <img src="https://i.pinimg.com/originals/cb/13/9c/cb139cce577d1fde61b1e944f17a905a.jpg" 
             alt="all" class="w-full h-24 object-cover">
        <div class="absolute inset-0 flex justify-center items-center">
            <a href="?kategori=all" 
               class="bg-white text-black text-sm font-semibold px-3 py-1 rounded-full shadow-md category-label">
                All
            </a>
        </div>
    </div>

</div>


<!-- Produk List -->
<div class="produk-list">
    {% if selected_kategori == 'all' %}
        
<div class="bg-gray-50 p-8">
    <!-- <h2 class="text-3xl font-bold mb-6">Produk Kerajinan</h2> -->

    <!-- Kain Batik -->
    <h3 class="text-2xl font-semibold mb-4">Kain Batik</h3>
    <div class="overflow-x-auto whitespace-nowrap mb-8">
        <div class="inline-flex gap-6">
            {% for product in kainBatik %}
                {% include 'product_card.html' %}
            {% empty %}
                <p class="text-center text-gray-500 w-full">Tidak ada produk batik tersedia.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Kerajinan Kulit -->
    <h3 class="text-2xl font-semibold mb-4">Kerajinan Kulit</h3>
    <div class="overflow-x-auto whitespace-nowrap mb-8">
        <div class="inline-flex gap-6">
            {% for product in kerajinanKulit %}
                {% include 'product_card.html' %}
            {% empty %}
                <p class="text-center text-gray-500 w-full">Tidak ada produk kerajinan kulit tersedia.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Kerajinan Perak -->
    <h3 class="text-2xl font-semibold mb-4">Kerajinan Perak</h3>
    <div class="overflow-x-auto whitespace-nowrap mb-8">
        <div class="inline-flex gap-6">
            {% for product in kerajinanPerak %}
                {% include 'product_card.html' %}
            {% empty %}
                <p class="text-center text-gray-500 w-full">Tidak ada produk perak tersedia.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Kerajinan Wayang -->
    <h3 class="text-2xl font-semibold mb-4">Kerajinan Wayang</h3>
    <div class="overflow-x-auto whitespace-nowrap mb-8">
        <div class="inline-flex gap-6">
            {% for product in kerajinanWayang %}
                {% include 'product_card.html' %}
            {% empty %}
                <p class="text-center text-gray-500 w-full">Tidak ada produk wayang tersedia.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Kerajinan Kayu -->
    <h3 class="text-2xl font-semibold mb-4">Kerajinan Kayu</h3>
    <div class="overflow-x-auto whitespace-nowrap mb-8">
        <div class="inline-flex gap-6">
            {% for product in kerajinanKayu %}
                {% include 'product_card.html' %}
            {% empty %}
                <p class="text-center text-gray-500 w-full">Tidak ada produk kayu tersedia.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Kerajinan Anyaman -->
    <h3 class="text-2xl font-semibold mb-4">Kerajinan Anyaman</h3>
    <div class="overflow-x-auto whitespace-nowrap mb-8">
        <div class="inline-flex gap-6">
            {% for product in kerajinanAnyaman %}
                {% include 'product_card.html' %}
            {% empty %}
                <p class="text-center text-gray-500 w-full">Tidak ada produk anyaman tersedia.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Kerajinan Gerabah -->
    <h3 class="text-2xl font-semibold mb-4">Kerajinan Gerabah</h3>
    <div class="overflow-x-auto whitespace-nowrap mb-8">
        <div class="inline-flex gap-6">
            {% for product in kerajinanGerabah %}
                {% include 'product_card.html' %}
            {% empty %}
                <p class="text-center text-gray-500 w-full">Tidak ada produk gerabah tersedia.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Kerajinan Bambu -->
    <h3 class="text-2xl font-semibold mb-4">Kerajinan Bambu</h3>
    <div class="overflow-x-auto whitespace-nowrap mb-8">
        <div class="inline-flex gap-6">
            {% for product in kerajinanBambu %}
                {% include 'product_card.html' %}
            {% empty %}
                <p class="text-center text-gray-500 w-full">Tidak ada produk bambu tersedia.</p>
            {% endfor %}
        </div>
    </div>

    <!-- Kain Tenun -->
    <h3 class="text-2xl font-semibold mb-4">Kain Tenun</h3>
    <div class="overflow-x-auto whitespace-normal mb-8">
        <div class="inline-flex gap-6">
            {% for product in kerajinanPerak %}
                {% include 'product_card.html' %}
            {% endfor %}
        </div>
    </div>
    
</div>


        <!-- Tambahkan kategori lainnya sesuai kebutuhan -->

    {% else %}
        <!-- Tampilkan Produk Kategori Tertentu -->
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-6 p-6">
            {% if books %}
                {% for product in books %}
                    <!-- <div class="produk bg-white rounded-lg shadow-lg overflow-hidden transform transition duration-300 hover:scale-105 hover:shadow-xl"> -->
                        {% include 'product_card.html' %}
                    <!-- </div> -->
                {% endfor %}
            {% else %}
                <p class="text-center text-gray-500 w-full">Tidak ada produk yang ditemukan.</p>
            {% endif %}
        </div>
        
        
    {% endif %}
</div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  document.querySelectorAll('.filter-button').forEach(button => {
  button.addEventListener('click', () => {
    const kategori = button.getAttribute('data-kategori');

    fetch(`/filter-kategori?kategori=${kategori}`, {
      headers: {
        'x-requested-with': 'XMLHttpRequest'
      }
    })
      .then(response => response.json())
      .then(data => {
        const produkList = document.querySelector('.produk-list');
        produkList.innerHTML = ''; // Reset list produk

        data.products.forEach(product => {
          const produkItem = document.createElement('div');
          produkItem.classList.add('produk');
          produkItem.innerHTML = `
            <h3>${product.name.toLocaleString}</h3>
            <p>Rp${product.harga.toLocaleString()}</p>
          `;
          produkList.appendChild(produkItem);
        });
      });
  });
});

 // Fungsi untuk membaca parameter dari URL
function getQueryParam(param) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
}

// Fungsi untuk memilih kategori berdasarkan nama
function selectCategory(selectedCategory) {
    const items = document.querySelectorAll('.category-item');

    items.forEach((item) => {
        const label = item.querySelector('.category-label').innerText.trim().toLowerCase(); // Normalize to lowercase

        if (label === selectedCategory.toLowerCase()) { // Compare in lowercase
            item.classList.remove('opacity-50');
        } else {
            item.classList.add('opacity-50');
        }
    });
}

// Event listener untuk setiap kategori
const categoryItems = document.querySelectorAll('.category-item a');
categoryItems.forEach((item) => {
    item.addEventListener('click', function (event) {
        const selectedCategory = this.innerText.trim();
        selectCategory(selectedCategory); // Pilih kategori saat diklik
    });
});

// Pilih kategori berdasarkan URL parameter saat halaman dimuat
window.onload = () => {
    const category = getQueryParam('kategori') || 'all'; // Default ke 'all'
    selectCategory(category);
};

  
</script>

{% endblock content %}