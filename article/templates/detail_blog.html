{% extends "base.html" %}

{% block meta %}
<title>Home</title>
{% endblock meta %}

{% include "navbar.html" %}

{% block content %}

<style>
    .tag {
        background-color: #ebf8ff;
        color: #3182ce;
        text-decoration: none;
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
        border-radius: 9999px;
        transition: background-color 0.3s ease, color 0.3s ease, transform 0.3s ease;
    }

    .tag:hover {
        background-color: #3182ce;
        color: #ffffff;
        transform: scale(1.1);
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    }
</style>

<div class="max-w-screen-xl mx-auto px-4">
    <main class="mt-10 grid grid-cols-1 md:grid-cols-3 gap-8">

        <!-- Left Column: Article Content -->
        <div class="col-span-2">
            <div class="mb-4 md:mb-0 w-full max-w-screen-md mx-auto relative" style="height: 24em;">
                <div class="absolute left-0 bottom-0 w-full h-full z-10"
                    style="background-image: linear-gradient(180deg,transparent,rgba(0,0,0,.7));"></div>

                {% if article.image %}
                <img src="{{ article.image.url }}" class="absolute left-0 top-0 w-full h-full z-0 object-cover" />
                {% else %}
                <img src="https://via.placeholder.com/400"
                    class="absolute left-0 top-0 w-full h-full z-0 object-cover" />
                {% endif %}

                <div class="p-4 absolute bottom-0 left-0 z-20">
                    <a href="#" class="px-4 py-1 bg-black text-gray-200 inline-flex items-center justify-center mb-2">
                        {{ article.tags }}
                    </a>
                    <h2 class="text-4xl font-semibold text-gray-100 leading-tight">
                        {{ article.title }}
                    </h2>
                    <div class="flex mt-3">
                        <img src="https://randomuser.me/api/portraits/men/97.jpg"
                            class="h-10 w-10 rounded-full mr-2 object-cover" />
                        <div>
                            <p class="font-semibold text-gray-200 text-sm">{{ article.author }}</p>
                            <p class="font-semibold text-gray-400 text-xs">{{ article.publication_date|date:"j M Y" }}
                            </p>
                        </div>
                    </div>
                <!-- Edit and Delete Buttons -->
                <div class="mt-4">
                    <a href="{% url 'article:edit_article' article.id %}"
                        class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition duration-200">Edit</a>
                    <form action="{% url 'article:delete_article' article.id %}" method="POST" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit"
                            class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition duration-200">Delete</button>
                    </form>
                </div>
                </div>
            </div>

            <div class="px-4 lg:px-0 mt-12 text-gray-700 max-w-screen-md mx-auto text-lg leading-relaxed">
                <p class="pb-6">{{ article.description }}</p>
                <p>{{ article.content }}</p>
            </div>
        </div>

        <!-- Right Column: Related Articles and Tags -->
        <aside class="hidden md:block">
            <h2 class="text-xl font-semibold mb-4">Related Articles</h2>
            <div class="space-y-4">
                {% for related_article in related_articles %}
                <a href="{% url 'article:detail_blog' related_article.id %}"
                    class="block bg-white rounded-lg shadow-md overflow-hidden transform transition duration-300 hover:scale-105 hover:shadow-lg">
                    {% if related_article.image %}
                    <img src="{{ related_article.image.url }}" class="h-32 w-full object-cover"
                        alt="{{ related_article.title }}">
                    {% else %}
                    <img src="https://via.placeholder.com/200" class="h-32 w-full object-cover" alt="Placeholder Image">
                    {% endif %}
                    <div class="p-4">
                        <h3 class="text-blue-600 font-semibold text-lg">{{ related_article.title }}</h3>
                        <p class="text-gray-600 text-sm mt-1">{{ related_article.description|truncatewords:10 }}</p>
                    </div>
                </a>
                {% endfor %}
            </div>

            <div class="mt-6">
                <h3 class="text-lg font-semibold mb-2">Explore Tags</h3>
                <div class="flex flex-wrap gap-2">
                    {% for tag in tags %}
                    <a href="www.google.com" class="tag">#{{ tag }}</a>
                    {% endfor %}
                </div>
            </div>
        </aside>

    </main>
</div>

{% endblock content %}

{% block script %}
<script src="/static/js/nav_script.js"></script>
{% endblock script %}